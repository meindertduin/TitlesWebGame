@using TitlesWebGame.WebUi.ViewModels
@using TitlesWebGame.Domain.ViewModels
@using TitlesWebGame.WebUi.Services

@using GEmojiSharp.Blazor

<div class="container">
    <div class="row justify-content-center">
        <div class="round-title">@GameViewModel.NextRoundInfo.RoundStatement</div>
    </div>
            
    <div class="options-container">
        @{
            string colorOption = @GameViewModel.Player.RoundAwardedPoints > 0 ? "right" : "wrong";
        }
        <div class="option-button option-color-@colorOption">
            @if (GameViewModel.NextRoundInfo is MultipleChoiceRoundInfoViewModel nextRoundInfo)
            {
                <MultipleChoiceAnswerDisplay Answer="@GameViewModel.PreviousRoundInfo.Answer" Choices="@nextRoundInfo.Choices" ColorOption="@colorOption"/>
            }
        </div>
    </div>
            
    <div class="row justify-content-center h3">
        <div>you were awarded @GameViewModel.Player.RoundAwardedPoints points this round!</div>
    </div>
</div>

@{
    var sortedPlayers = GameViewModel.SessionPlayers;
    sortedPlayers.Sort((x, y) => x.CurrentPoints.CompareTo(y.CurrentPoints));
    
    <SessionLeaderBoard SortedPlayers="@sortedPlayers" />
}



@code {
    [CascadingParameter(Name = "GameViewModel")]
    protected GameViewModel GameViewModel { get; set; }
    
}